(()=>{"use strict";const e=document.querySelector(".folder-body"),t=document.querySelector(".task-body"),a=document.querySelector("#folder-button"),n=document.querySelector("#task-button"),o=document.querySelector("#folder-add");document.querySelector(".header");let l,c=document.querySelectorAll(".folder-body h1"),d=[];function r(){e.innerHTML="",d.forEach((t=>{let a=document.createElement("h1");a.innerText=t.getName(),e.appendChild(a)}))}function s(){var e,a;""!==o.value&&d.length<6&&(d.push((e=o.value,a=[],{getName:()=>e,getTasks:()=>a,addTask:(e,t,n)=>{a.push(((e,t,a)=>({getName:()=>e,getDone:()=>a,changeDone:()=>{a=!a},getDate:()=>t}))(e,t,n))},deleteTask:e=>{a.splice(e,1)}})),localStorage.setItem("dataFolder",JSON.stringify(d)),console.log(d),console.log("josn"),console.log(JSON.parse(localStorage.dataFolder)),t.innerHTML="",o.value="",r(),c=document.querySelectorAll(".folder-body h1"),function(){for(let e=0;e<c.length;e++)c[e].addEventListener("click",(t=>{c.forEach((e=>{e.classList.remove("folder-active")})),c[e].classList.add("folder-active"),u(d[e])}));n.addEventListener("click",(()=>{for(let e=0;e<c.length;e++)if(console.log(c[e].classList),"folder-active"===c[e].classList.value){const a=document.createElement("input"),n=document.createElement("input"),o=document.createElement("div"),l=document.createElement("button");o.classList.add("task-adding"),a.setAttribute("placeholder","Name:"),n.setAttribute("placeholder","Date:"),n.setAttribute("type","date"),l.innerText="add",t.innerHTML="",o.append(a,n,l),t.appendChild(o),l.addEventListener("click",(()=>{i(a.value,n.value,e,!1),u(d[e])}))}}))}())}function i(e,t,a,n){""!==e&&""!==t&&d[a].getTasks().length<6&&(d[a].addTask(e,t,n),localStorage.setItem("dataFolder",JSON.stringify(d)))}function u(e){t.innerHTML="";let a=0;e.getTasks().forEach((n=>{console.log(n);let o=document.createElement("div"),l=document.createElement("h1"),c=document.createElement("input"),d=document.createElement("button"),r=document.createElement("button"),s=document.createElement("div");c.setAttribute("type","checkbox"),c.setAttribute("id","_checkbox"),d.innerText="delete",r.innerText="edit",l.innerText=n.getName(),c.checked=n.getDone(),o.classList.add("taskDiv"),d.classList,d.name=a,c.name=a,r.name=a,s.append(r,d),o.append(c,l,s),t.appendChild(o),d.addEventListener("click",(t=>{!function(e,t){e.deleteTask(t.target.name),u(e)}(e,t)})),c.addEventListener("change",(t=>{!function(e,t){e.getTasks()[t.target.name].changeDone()}(e,t)})),r.addEventListener("click",(a=>{!function(e,a){let n=e.getTasks()[a.target.name].getName(),o=e.getTasks()[a.target.name].getDate(),l=e.getTasks()[a.target.name].getDone();t.innerHTML="";const c=document.createElement("input"),d=document.createElement("input"),r=document.createElement("div"),s=document.createElement("button");r.classList.add("task-adding"),c.setAttribute("placeholder","Name:"),d.setAttribute("placeholder","Date:"),d.setAttribute("type","date"),s.innerText="edit",c.value=n,d.value=o,r.append(c,d,s),t.appendChild(r),s.addEventListener("click",(()=>{e.deleteTask(a.target.name),i(c.value,d.value,a.target.name,l),u(e)}))}(e,a)})),a++}))}localStorage.clear(),function(e){var t;try{t=window.localStorage;var a="__storage_test__";return t.setItem(a,a),t.removeItem(a),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}()?(localStorage.getItem("dataFolder")||localStorage.setItem("dataFolder",JSON.stringify(d)),l=localStorage.getItem("dataFolder"),d=JSON.parse(l),console.log(localStorage.dataFolder)):l=d,r(),o.addEventListener("keyup",(function(e){13===e.keyCode&&s()})),a.addEventListener("click",(()=>{s()}))})();